	MVI B,00H			;BC =100  IN DECIMAL, SO 1/10 SEC TIME DELAY
	MVI C,64H			;FOR DELB

START:
	LDA 2000H			;READ INPUT
	RAR				;CY=LSB
	JC START			;IF LSB!=0 READ INPUT AGAIN
	
STEP2:				;LSB WAS 0 BEFORE
	LDA 2000H			;READ INPUT
	RAR				;CY=LSB
	JNC STEP2		 	;IF LSB!=1 READ INPUT AGAIN
	
STEP3:
	LDA 2000H
	RAR
	JC STEP3			;SAME OLD STUFF

GETREADYFORTHIS:
	MVI E,96H			;E=150 IN DECIMAL
	MVI D,00H			;USED AS COUNTER
	
ALLTHESIGNLELIGHTS:
	CALL TICK_TOCK

	MVI A,00H
	STA 3000H			;LIGHT ALL THE LIGHTS
	
	CALL TICK_TOCK		;EVERY TIME WE CHECK LSB WE HAVE CALLED
;TICK_TOCK TWICE, THUS ? SEC HAVE PASSED

	MVI A,00H
	CMA
	STA 3000H			;TURN OFF ALL THE LIGHTS
		
	MOV A,D
	CPI 00H			;IF SWITCH WAS DOWN
	JZ THING1			;CHECK WHAT'S HAPPENING NOW
	CPI 01H			;IF SWITCH WAS UP AFTER BEING DOWN
	JZ THING2			;CHECK WHAT'S HAPPENING NOW
	
	
THING1:
	LDA 2000H
	RAR
	JNC ALLTHESIGNLELIGHTS	;SWITCH NOT ON YET
	INR D				;SWITCH IS ON
	JMP ALLTHESIGNLELIGHTS

THING2:
	LDA 2000H
	RAR
	JC ALLTHESIGNLELIGHTS ;SWITCH NOT DOWN YET
	JMP GETREADYFORTHIS	 ;SWITCH IS DOWN

	
TICK_TOCK:
	NOP
	NOP
	NOP
	DCR E				;150*1/10 = 15sec
	MOV A,E
	CPI 00H			;CHECK IF TIME'S UP
	JZ START			;IF YES START OVER WITH ALL LEDS OFF
	RET

	END
	